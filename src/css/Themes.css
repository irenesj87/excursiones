/* ======================================== */
/* 1. VARIABLES GLOBALES (NO DEPENDEN DEL TEMA) */
/* ======================================== */
:root {
	/* Paleta de colores base y variables que no cambian con el tema */
	--white: #fff;
	--black: #000;

	/* Radios de borde para consistencia */
	--border-radius-sm: 0.25rem; /* 4px */
	--border-radius-md: 0.5rem; /* 8px */
	--border-radius-lg: 0.75rem; /* 12px */
}

/* ======================================== */
/* --- ESTILOS PARA MODO CLARO --- */
/* ======================================== */
html.light body {
	/* --- Paleta y Colores Base (Minimalista y Moderno) --- */
	--primary-color: hsl(145, 60%, 35%); /* Verde con mejor contraste */
	--primary-color-hover: hsl(145, 60%, 30%); /* Verde más oscuro */
	--accent-color: hsl(145, 60%, 35%);
	--heading-color: hsl(140, 25%, 25%); /* Verde oscuro y apagado */
	--body-bg: hsl(140, 50%, 98%); /* Blanco con un ligero tinte verde */
	background-color: var(--body-bg);

	/* --- Texto --- */
	--text-color: hsl(210, 10%, 23%); /* Gris oscuro para texto: #333D49 */
	color: var(--text-color);
	--text-secondary: hsl(210, 9%, 45%); /* Gris medio: #64748B */

	/* --- Bordes y Separadores --- */
	--separator-color: hsl(140, 30%, 94%); /* Verde-grisáceo muy claro */

	/* --- Botones y Enlaces --- */
	--login-btn-text: #ffffff;
	--login-btn-bg: var(--primary-color);
	--login-btn-border: var(--primary-color);
	--login-btn-bg-hover: var(--primary-color-hover);
	--login-btn-border-hover: var(--primary-color-hover);

	--register-link-color: var(--heading-color);
	--register-link-border-color: var(--separator-color);
	--switcher-link-color: var(--primary-color);

	--logout-bg-color: hsl(140, 30%, 94%); /* Verde-grisáceo claro */
	--logout-bg-color-hover: hsl(140, 30%, 90%); /* Un poco más oscuro */
	--logout-text-color: var(--text-color);

	--theme-toggle-btn-color: var(--text-secondary);
	--theme-toggle-btn-border-color: var(--separator-color);
	--theme-toggle-btn-bg-hover: hsl(140, 30%, 94%);

	/* --- Tarjetas (ExcursionCard, UserInfo) --- */
	--excursion-card-bg: #ffffff;
	--excursion-card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
		0 2px 4px -2px rgb(0 0 0 / 0.1);
	--excursion-card-title-color: var(--heading-color);
	--excursion-card-icon-color: var(--primary-color);
	--excursion-card-joined-status-text: var(--primary-color);

	/* --- Filtros --- */
	--filter-container-bg: #ffffff;
	--filter-title-color: var(--heading-color);

	--filters-toggle-btn-color: var(--text-secondary);
	--filters-toggle-btn-border: var(--separator-color);
	--filters-toggle-btn-bg-hover: hsl(140, 30%, 94%);
	--filters-toggle-btn-color-hover: var(--primary-color);
	--filters-toggle-btn-border-hover: var(--primary-color);

	--filter-pill-bg: hsl(140, 30%, 94%);
	--filter-pill-text: var(--text-color);
	--filter-pill-border: var(--separator-color);
	--filter-pill-bg-hover: hsl(210, 40%, 93%);
	--filter-pill-border-hover: hsl(210, 31%, 80%);
	--filter-pill-bg-checked: var(--primary-color);
	--filter-pill-text-checked: #ffffff;
	--filter-pill-border-checked: var(--primary-color);
	--filter-pill-shadow-checked: none;

	--filter-clear-btn-color-hover: hsl(347, 77%, 50%); /* Rojo */

	/* --- Footer --- */
	--footer-bg: var(--body-bg);
	--footer-text-color: var(--text-secondary);
	--footer-border-top: var(--separator-color);
	--footer-icon-bg: hsl(140, 30%, 92%);
	--footer-icon-color: var(--text-secondary);
	--footer-icon-bg-hover: hsl(210, 40%, 88%);

	/* --- Indicadores de Dificultad (Bootstrap Overrides) --- */
	--bs-success: hsl(145, 60%, 35%);
	--bs-warning: hsl(40, 80%, 60%);
	--bs-danger: hsl(0, 60%, 40%);

	/* --- Variables para badges de dificultad --- */
	--difficulty-low-bg: hsl(140, 60%, 95%);
	--difficulty-low-text: hsl(140, 50%, 35%);
	--difficulty-medium-bg: hsl(40, 80%, 95%);
	--difficulty-medium-text: hsl(40, 70%, 30%);
	--difficulty-high-bg: hsl(0, 80%, 97%);
	--difficulty-high-text: hsl(0, 60%, 40%);

	/* --- Accesibilidad --- */
	--focus-outline-color: var(--primary-color);
}

/* ======================================== */
/* 3. TEMA OSCURO (DARK) */
/* ======================================== */
html.dark body {
	/* --- Paleta y Colores Base (Minimalista y Moderno) --- */
	--primary-color: hsl(140, 45%, 70%); /* Verde pastel claro */
	--primary-color-hover: hsl(140, 45%, 65%); /* Un poco más oscuro */
	--accent-color: hsl(140, 45%, 70%);
	--heading-color: hsl(140, 25%, 95%); /* Blanco con tinte verde */
	--body-bg: hsl(140, 10%, 15%); /* Verde muy oscuro */
	background-color: var(--body-bg);

	/* --- Texto --- */
	--text-color: hsl(140, 15%, 85%); /* Gris verdoso claro */
	color: var(--text-color);
	--text-secondary: hsl(140, 10%, 65%); /* Gris verdoso medio */

	/* --- Bordes y Separadores --- */
	--separator-color: hsl(140, 10%, 25%); /* Verde-grisáceo oscuro */

	/* --- Botones y Enlaces --- */
	--login-btn-text: hsl(140, 15%, 10%); /* Verde muy oscuro, casi negro */
	--login-btn-bg: var(--primary-color);
	--login-btn-border: var(--primary-color);
	--login-btn-bg-hover: var(--primary-color-hover);
	--login-btn-border-hover: var(--primary-color-hover);

	--register-link-color: var(--text-color);
	--register-link-border-color: var(--separator-color);
	--switcher-link-color: var(--primary-color);

	--logout-bg-color: hsl(140, 10%, 25%);
	--logout-bg-color-hover: hsl(140, 10%, 30%);
	--logout-text-color: var(--text-color);

	--theme-toggle-btn-color: #e8f5e9;
	--theme-toggle-btn-border-color: #3a5a40;
	--theme-toggle-btn-bg-hover: rgba(255, 255, 255, 0.1);

	/* --- Tarjetas (ExcursionCard, UserInfo) --- */
	--excursion-card-bg: hsl(140, 10%, 20%); /* Verde-grisáceo */
	--excursion-card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.2),
		0 2px 4px -2px rgb(0 0 0 / 0.2);
	--excursion-card-title-color: var(--heading-color);
	--excursion-card-icon-color: var(--primary-color);
	--excursion-card-joined-status-text: hsl(
		138,
		71%,
		65%
	); /* Verde éxito claro */

	/* --- Filtros --- */
	--filter-container-bg: hsl(140, 10%, 20%);
	--filter-title-color: var(--heading-color);

	--filters-toggle-btn-color: var(--text-color);
	--filters-toggle-btn-border: var(--separator-color);
	--filters-toggle-btn-bg-hover: hsl(140, 10%, 25%);
	--filters-toggle-btn-color-hover: var(--primary-color);
	--filters-toggle-btn-border-hover: var(--primary-color);

	--filter-pill-bg: hsl(140, 10%, 25%);
	--filter-pill-text: var(--text-color);
	--filter-pill-border: hsl(140, 10%, 30%);
	--filter-pill-bg-hover: hsl(140, 10%, 30%);
	--filter-pill-border-hover: hsl(140, 10%, 40%);
	--filter-pill-bg-checked: var(--primary-color);
	--filter-pill-text-checked: hsl(140, 15%, 10%);
	--filter-pill-border-checked: var(--primary-color);
	--filter-pill-shadow-checked: none;

	--filter-clear-btn-color-hover: hsl(355, 83%, 71%); /* Rojo claro */

	/* --- Footer --- */
	--footer-bg: var(--body-bg);
	--footer-text-color: var(--text-secondary);
	--footer-border-top: var(--separator-color);
	--footer-icon-bg: hsl(140, 10%, 20%);
	--footer-icon-color: var(--text-secondary);
	--footer-icon-bg-hover: hsl(140, 10%, 25%);

	/* --- Indicadores de Dificultad (Bootstrap Overrides) --- */
	--bs-success: hsl(138, 71%, 65%);
	--bs-warning: hsl(43, 94%, 66%);
	--bs-danger: hsl(355, 83%, 71%);

	/* --- Variables para badges de dificultad --- */
	--difficulty-low-bg: hsl(145, 63%, 22%);
	--difficulty-low-text: hsl(145, 63%, 82%);
	--difficulty-medium-bg: hsl(35, 91%, 25%);
	--difficulty-medium-text: hsl(35, 91%, 75%);
	--difficulty-high-bg: hsl(347, 77%, 30%);
	--difficulty-high-text: hsl(347, 77%, 80%);

	/* --- Accesibilidad --- */
	--focus-outline-color: var(--primary-color);
}

/* ======================================== */
/* 4. ESTILOS DE COMPONENTES (DEPENDEN DEL TEMA) */
/* ======================================== */

/* --- Estilos Globales --- */
/* Elimina transiciones por defecto para evitar parpadeos al cambiar de tema */
.form-control,
.page-link,
.accordion-button,
.accordion-body {
	transition: none;
}

/* Elimina la transición del body para evitar parpadeos al cambiar de tema */
body {
	transition: none;
}

/* Estilos para botones deshabilitados de forma accesible.
   Se mantienen en el DOM y son enfocables, pero visualmente parecen inactivos. */
.btn[aria-disabled="true"] {
	opacity: 0.65; /* Reduce la opacidad para indicar visualmente que está inactivo */
	cursor: not-allowed; /* Cambia el cursor para indicar que no es clickeable */
}

/* Invierte el color del botón de cierre en modo oscuro para que sea visible */
html.dark .btn-close {
	filter: invert(1) grayscale(100%) brightness(200%);
}

/* --- Formularios (Inputs, etc.) --- */
.form-control {
	background-color: var(--excursion-card-bg);
	color: var(--text-color);
	border: 1px solid var(--separator-color);
}

.form-control::placeholder {
	color: var(--text-secondary);
}

/* Sobrescribe el estilo de foco de Bootstrap para que sea consistente con el :focus-visible global */
.form-control:focus {
	color: var(--text-color);
	background-color: var(--excursion-card-bg);
	border-color: var(
		--separator-color
	); /* Mantenemos el color de borde normal */
	/* Se elimina el box-shadow por defecto de Bootstrap para que el outline de :focus-visible sea el único indicador */
	box-shadow: none;
}

/* Estilos para inputs deshabilitados o de solo lectura, para que se adapten al tema */
/* Se excluyen los de tipo 'plaintext' para que no tengan fondo */
.form-control:disabled:not(.form-control-plaintext),
.form-control[readonly]:not(.form-control-plaintext) {
	background-color: var(--excursion-card-bg);
	color: var(--text-secondary);
	/* Reseteamos la opacidad que Bootstrap aplica por defecto a los campos deshabilitados */
	opacity: 1;
}

/* --- Hamburguer menu --- */
.navbar-toggler-icon {
	width: 1.3em;
	height: 1.3em;
}

/* --- Offcanvas (Menú y Filtros) --- */
/* Estos estilos son globales para asegurar que se aplican a los componentes Offcanvas de react-bootstrap */
.offcanvas-header {
	font-weight: bolder;
	padding: 1rem 1.25rem;
	background-color: var(--body-bg);
	color: var(--text-color);
	border-bottom: 1px solid var(--separator-color);
}

.offcanvas-body {
	/* El padding por defecto de Bootstrap es 1rem. Lo eliminamos aquí para que los contenedores hijos
	   puedan controlarlo. El Offcanvas de filtros, por ejemplo, tiene su propio padding interno. */
	padding: 0;
	background-color: var(--excursion-card-bg);
}

/* Estilos específicos para los enlaces dentro del Offcanvas de navegación (identificado por su ID) */
#offcanvasNavbar .offcanvas-body .nav-link {
	display: block;
	width: 95%;
	margin: 0 auto 0.6rem; /* Centrado horizontalmente y con margen inferior */
	text-align: center;
	padding: 0.6rem 1rem;
	color: var(
		--text-color
	); /* Asegura que el texto sea legible en ambos temas */
	text-decoration: none;
	border-radius: 0.375rem;
	transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Estilos para el botón de 'Iniciar Sesión' dentro del Offcanvas */
#offcanvasNavbar .offcanvas-body .nav-link.loginLink {
	color: var(--login-btn-text);
	background-color: var(--login-btn-bg);
	border: 1px solid var(--login-btn-border);
}

#offcanvasNavbar .offcanvas-body .nav-link.loginLink:hover {
	background-color: var(--login-btn-bg-hover);
	border-color: var(--login-btn-border-hover);
}

/* Estilos para el botón de 'Cerrar Sesión' dentro del Offcanvas */
#offcanvasNavbar .offcanvas-body .logoutLink {
	color: var(--logout-text-color);
	background-color: var(--logout-bg-color);
	border: 1px solid var(--logout-bg-color);
	display: block;
	width: 95%;
	margin: 0 auto 0.6rem;
	text-align: center;
	padding: 0.6rem 1rem;
	text-decoration: none;
	border-radius: 0.375rem;
	transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}
#offcanvasNavbar .offcanvas-body .logoutLink:hover {
	background-color: var(--logout-bg-color-hover);
	border-color: var(--logout-bg-color-hover);
}
/* Estilos específicos para los inputs de tipo 'plaintext' */
.form-control-plaintext {
	color: var(--text-color);
}
