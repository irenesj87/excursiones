/* ======================================== */
/* 1. VARIABLES GLOBALES (NO DEPENDEN DEL TEMA) */
/* ======================================== */
:root {
	/* Paleta de colores base y variables que no cambian con el tema */
	--filter-clear-btn-color-hover: #dc3545; /* Color de peligro de Bootstrap */
	--white: #fff;
	--black: #000;
}

/* ======================================== */
/* --- ESTILOS PARA MODO CLARO --- */
/* ======================================== */
html.light body {
	/* --- Paleta y Colores Base --- */
	--primary-color: #315036; /* Verde principal */
	--accent-color: #833800; /* Naranja oscuro para contraste (WCAG AA) */
	--heading-color: var(--primary-color);
	--body-bg: #f7f9f7; /* Blanco con un sutil tinte verde */
	background-color: var(--body-bg);

	/* --- Texto --- */
	--text-color: #1a2b1e; /* Verde muy oscuro, casi negro */
	color: var(--text-color);
	--text-secondary: #5c7f67; /* Verde-grisáceo */

	/* --- Bordes y Separadores --- */
	--separator-color: #dce3dd; /* Verde-grisáceo muy claro */

	/* --- Botones y Enlaces --- */
	--login-btn-text: #ffffff;
	--login-btn-bg: var(--primary-color);
	--login-btn-border: var(--primary-color);
	--login-btn-bg-hover: #253c29; /* Tono más oscuro de --primary-color */
	--login-btn-border-hover: #253c29;

	--register-link-color: #1a2b1e;
	--register-link-border-color: #1a2b1e;
	--switcher-link-color: var(--primary-color);

	--logout-bg-color: #6c757d; /* Gris secundario de Bootstrap */
	--logout-bg-color-hover: #5c636a; /* Gris secundario más oscuro de Bootstrap */
	--logout-text-color: #ffffff; /* Texto blanco para contraste en fondo oscuro */

	--theme-toggle-btn-color: var(--text-secondary);
	--theme-toggle-btn-border-color: var(--separator-color);
	--theme-toggle-btn-bg-hover: rgba(0, 0, 0, 0.05);

	/* --- Tarjetas (ExcursionCard, UserInfo) --- */
	--excursion-card-bg: #ffffff; /* Blanco puro para que las tarjetas resalten */
	--excursion-card-shadow: 0 5px 15px rgba(49, 80, 54, 0.08);
	--excursion-card-title-color: #1a2b1e;
	--excursion-card-icon-color: var(--primary-color);
	--excursion-card-joined-status-text: var(--bs-success);

	/* --- Filtros --- */
	--filter-container-bg: #ffffff;
	--filter-title-color: #1a2b1e;

	--filters-toggle-btn-color: #5c7f67;
	--filters-toggle-btn-border: #dce3dd;
	--filters-toggle-btn-bg-hover: #e2e6ea;
	--filters-toggle-btn-color-hover: #315036;
	--filters-toggle-btn-border-hover: #dce3dd;

	--filter-pill-bg: #f1f3f5;
	--filter-pill-text: #495057;
	--filter-pill-border: #dee2e6;
	--filter-pill-bg-hover: #e9ecef;
	--filter-pill-border-hover: #adb5bd;
	--filter-pill-bg-checked: var(--primary-color);
	--filter-pill-text-checked: #ffffff;
	--filter-pill-border-checked: var(--primary-color);
	--filter-pill-shadow-checked: 0 2px 5px rgba(0, 0, 0, 0.1);

	/* --- Footer --- */
	--footer-bg: var(--primary-color);
	--footer-text-color: #ffffff;
	--footer-border-top: var(--separator-color);
	--footer-icon-bg: #ffffff;
	--footer-icon-color: var(--primary-color);
	--footer-icon-bg-hover: #f0f0f0;

	/* --- Indicadores de Dificultad (Bootstrap Overrides) --- */
	/* Se definen para asegurar consistencia y contraste */
	--bs-success: var(--primary-color); /* #315036 */
	--bs-warning: var(--accent-color); /* #c05600 */
	--bs-danger: #d32f2f; /* Un rojo más oscuro para mejor contraste con texto blanco */

	/* --- Accesibilidad --- */
	--focus-outline-color: var(--accent-color);
}

/* ======================================== */
/* 3. TEMA OSCURO (DARK) */
/* ======================================== */
html.dark body {
	/* --- Paleta y Colores Base --- */
	--primary-color: #315036; /* Verde principal (mantenido para consistencia en headers) */
	--accent-color: #f39c12; /* Naranja para alertas */
	--heading-color: #9ccc65; /* Verde más brillante para contraste */
	--body-bg: #1a2b1e; /* Verde muy oscuro para el fondo */
	background-color: var(--body-bg);

	/* --- Texto --- */
	--text-color: #e8f5e9; /* Blanco verdoso muy claro */
	color: var(--text-color);
	--text-secondary: #a3b8a8; /* Verde-grisáceo */

	/* --- Bordes y Separadores --- */
	--separator-color: #3a5a40; /* Verde oscuro */

	/* --- Botones y Enlaces --- */
	--login-btn-text: #1a2b1e; /* Texto oscuro para contraste en botón brillante */
	--login-btn-bg: var(--heading-color);
	--login-btn-border: var(--heading-color);
	--login-btn-bg-hover: #8bc34a; /* Tono más oscuro de --heading-color */
	--login-btn-border-hover: #8bc34a;

	--register-link-color: #e8f5e9;
	--register-link-border-color: #a3b8a8; /* Borde más sutil */
	--switcher-link-color: var(--heading-color);

	--logout-bg-color: rgb(80, 73, 73);
	--logout-bg-color-hover: rgb(100, 93, 93);
	--logout-text-color: #e8f5e9; /* Texto claro para contraste en fondo oscuro */

	--theme-toggle-btn-color: #e8f5e9;
	--theme-toggle-btn-border-color: #3a5a40;
	--theme-toggle-btn-bg-hover: rgba(255, 255, 255, 0.1);

	/* --- Tarjetas (ExcursionCard, UserInfo) --- */
	--excursion-card-bg: #213426; /* Verde un poco más claro que el fondo */
	--excursion-card-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
	--excursion-card-title-color: #e8f5e9;
	--excursion-card-icon-color: var(--heading-color);
	--excursion-card-joined-status-text: var(--heading-color);

	/* --- Filtros --- */
	--filter-container-bg: #213426;
	--filter-title-color: #e8f5e9;

	--filters-toggle-btn-color: #e8f5e9;
	--filters-toggle-btn-border: #a3b8a8;
	--filters-toggle-btn-bg-hover: rgba(255, 255, 255, 0.1);
	--filters-toggle-btn-color-hover: #e8f5e9;
	--filters-toggle-btn-border-hover: #a3b8a8;

	--filter-pill-bg: #3a5a40; /* Verde oscuro para píldoras no seleccionadas */
	--filter-pill-text: #e8f5e9;
	--filter-pill-border: #4f7659;
	--filter-pill-bg-hover: #4f7659;
	--filter-pill-border-hover: #6a994e;
	--filter-pill-bg-checked: var(--heading-color); /* Verde brillante */
	--filter-pill-text-checked: #1a2b1e; /* Texto oscuro para máximo contraste */
	--filter-pill-border-checked: var(--heading-color);
	--filter-pill-shadow-checked: 0 2px 8px rgba(0, 0, 0, 0.4);

	/* --- Footer --- */
	--footer-bg: #1a2b1e; /* Coincide con el fondo del body y la navbar */
	--footer-text-color: var(--text-color); /* #e8f5e9 */
	--footer-border-top: var(--separator-color); /* #3a5a40 */
	--footer-icon-bg: #3a5a40; /* Coincide con el borde y las píldoras de filtro */
	--footer-icon-color: var(--text-color); /* #e8f5e9 */
	--footer-icon-bg-hover: #4f7659; /* Coincide con el hover de las píldoras de filtro */

	/* --- Indicadores de Dificultad (Bootstrap Overrides) --- */
	/* Colores adaptados para no ser tan estridentes en fondo oscuro y mantener contraste */
	--bs-success: var(--heading-color); /* #9CCC65 */
	--bs-warning: var(--accent-color); /* #f39c12 */
	--bs-danger: #ef5350; /* Un rojo más suave y brillante */

	/* --- Accesibilidad --- */
	--focus-outline-color: var(--accent-color);
}

/* ======================================== */
/* 4. ESTILOS DE COMPONENTES (DEPENDEN DEL TEMA) */
/* ======================================== */

/* --- Estilos Globales --- */
/* Elimina transiciones por defecto para evitar parpadeos al cambiar de tema */
.form-control,
.page-link,
.accordion-button,
.accordion-body {
	transition: none;
}

/* Elimina la transición del body para evitar parpadeos al cambiar de tema */
body {
	transition: none;
}

/* Estilos para botones deshabilitados de forma accesible.
   Se mantienen en el DOM y son enfocables, pero visualmente parecen inactivos. */
.btn[aria-disabled="true"] {
	opacity: 0.65; /* Reduce la opacidad para indicar visualmente que está inactivo */
	cursor: not-allowed; /* Cambia el cursor para indicar que no es clickeable */
}

/* Invierte el color del botón de cierre en modo oscuro para que sea visible */
html.dark .offcanvas-header .btn-close {
	filter: invert(1) grayscale(100%) brightness(200%);
}

/* Estilo para los paneles de contenido principales, como los de las páginas de formulario */
.contentPane {
	/* Usa variables de tema para adaptarse al modo claro/oscuro */
	background-color: var(
		--excursion-card-bg
	); /* Reutilizamos el fondo de las tarjetas */
	color: var(--text-color);
	border: 1px solid var(--separator-color);
	border-radius: 0.5rem;
	margin-top: 2rem;
	margin-bottom: 2rem;
	padding: 2rem;
}

/* Media query para breakpoints pequeños (xs breakpoint de Bootstrap es <576px) */
@media (max-width: 575.98px) {
	.contentPane {
		margin-top: 1rem;
		margin-bottom: 1.5rem;
	}
}

/* --- Formularios (Inputs, etc.) --- */
.form-control {
	background-color: var(--excursion-card-bg);
	color: var(--text-color);
	border: 1px solid var(--separator-color);
}

.form-control::placeholder {
	color: var(--text-secondary);
}

/* Sobrescribe el estilo de foco de Bootstrap para que sea consistente con el :focus-visible global */
.form-control:focus {
	color: var(--text-color);
	background-color: var(--excursion-card-bg);
	border-color: var(
		--separator-color
	); /* Mantenemos el color de borde normal */
	/* Se elimina el box-shadow por defecto de Bootstrap para que el outline de :focus-visible sea el único indicador */
	box-shadow: none;
}

/* Estilos para inputs deshabilitados o de solo lectura, para que se adapten al tema */
/* Se excluyen los de tipo 'plaintext' para que no tengan fondo */
.form-control:disabled:not(.form-control-plaintext),
.form-control[readonly]:not(.form-control-plaintext) {
	background-color: var(--excursion-card-bg);
	color: var(--text-secondary);
	/* Reseteamos la opacidad que Bootstrap aplica por defecto a los campos deshabilitados */
	opacity: 1;
}

/* --- Hamburguer menu --- */
.navbar-toggler-icon {
	width: 1.3em;
	height: 1.3em;
}

/* --- Offcanvas (Menú y Filtros) --- */
/* Estos estilos son globales para asegurar que se aplican a los componentes Offcanvas de react-bootstrap */
.offcanvas-header {
	font-weight: bolder;
	padding: 1rem 1.25rem;
	background-color: var(--body-bg);
	color: var(--text-color);
	border-bottom: 1px solid var(--separator-color);
}

.offcanvas-body {
	/* El padding por defecto de Bootstrap es 1rem. Lo eliminamos aquí para que los contenedores hijos
	   puedan controlarlo. El Offcanvas de filtros, por ejemplo, tiene su propio padding interno. */
	padding: 0;
	background-color: var(--excursion-card-bg);
}

/* Estilos específicos para los enlaces dentro del Offcanvas de navegación (identificado por su ID) */
#offcanvasNavbar .offcanvas-body .nav-link {
	display: block;
	width: 95%;
	margin: 0 auto 0.6rem; /* Centrado horizontalmente y con margen inferior */
	text-align: center;
	padding: 0.6rem 1rem;
	color: var(--text-color); /* Asegura que el texto sea legible en ambos temas */
	text-decoration: none;
	border-radius: 0.375rem;
	transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Estilos para el botón de 'Iniciar Sesión' dentro del Offcanvas */
#offcanvasNavbar .offcanvas-body .nav-link.loginLink {
	color: var(--login-btn-text);
	background-color: var(--login-btn-bg);
	border: 1px solid var(--login-btn-border);
}

#offcanvasNavbar .offcanvas-body .nav-link.loginLink:hover {
	background-color: var(--login-btn-bg-hover);
	border-color: var(--login-btn-border-hover);
}

/* Estilos para el botón de 'Cerrar Sesión' dentro del Offcanvas */
#offcanvasNavbar .offcanvas-body .logoutLink {
	color: var(--logout-text-color);
	background-color: var(--logout-bg-color);
	border: 1px solid var(--logout-bg-color);
	display: block;
	width: 95%;
	margin: 0 auto 0.6rem;
	text-align: center;
	padding: 0.6rem 1rem;
	text-decoration: none;
	border-radius: 0.375rem;
	transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}
#offcanvasNavbar .offcanvas-body .logoutLink:hover {
	background-color: var(--logout-bg-color-hover);
	border-color: var(--logout-bg-color-hover);
}
/* Estilos específicos para los inputs de tipo 'plaintext' */
.form-control-plaintext {
	color: var(--text-color);
}

/* ======================================== */
/* 5. INSIGNIAS DE DIFICULTAD (BADGES)      */
/* ======================================== */

.badge-difficulty {
	padding: 0.35em 0.65em;
	font-size: 0.875em;
	font-weight: 700;
	line-height: 1;
	text-align: center;
	white-space: nowrap;
	vertical-align: baseline;
	border-radius: 0.375rem;
	transition: none;
}

/* --- Modo Claro (por defecto) --- */

/* Baja */
.badge-difficulty--baja {
	color: #004d40;
	background-color: #e0f2f1;
}

/* Media */
.badge-difficulty--media {
	color: #c76700;
	background-color: #fff8e1;
}

/* Alta */
.badge-difficulty--alta {
	color: #b71c1c;
	background-color: #ffeeee;
}

/* --- Modo Oscuro --- */
html.dark .badge-difficulty--baja {
	color: #e0f2f1;
	background-color: #004d40;
}

html.dark .badge-difficulty--media {
	color: #000000;
	background-color: #ff8f00;
}

html.dark .badge-difficulty--alta {
	color: #ffebee;
	background-color: #b71c1c;
}
